# encoding: utf-8
import json
import urllib
from bucho.compat import text_

# these methods are exposed to Internet by wsgi.py
__all__ = ['show', 'latest_status', 'all_status', 'torumemo']

_text="""
                                  #############                     ######## 
                                  #############                  ############## 
                                  #############                ################## 
                                  #############              ###################### 
                                     ########               ######################## 
                                    #######                ########################## 
                                    ######                ############################ 
                                   ######                ################        ###### 
                                   #####                 ##############            #### 
                                  #####                 ##############              #### 
                                  #####                 #############               #### 
                                  ####                  #############               #### 
                                  ####                  ############                #### 
                                  ####                 #############                #### 
                                  ####                 #############                #### 
                                  ####                #############                ##### 
                                  ####                #############               ##### 
                                  #####              ##############              ###### 
                                   ####              #############              ###### 
                                   #####            ##############             ####### 
                                    #####          ##############            ######## 
                                    ######       ################          ############# 
                                     ###########################           ############# 
                                      ##########################           ############# 
                                       ########################            ############# 
                                         #################### 
                                           ################ 
                                               ######### 
                                                         
                                  ####                                                                                   #### 
                                  ####                                                                                   #### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ########################################################################################### 
                                  ####                                      ##### 
                                  ####                                        ##### 
                                                                               ##### 
                                                                                ##### 
                                                                                ###### 
                                                                                 ###### 
                                                                                 ###### 
                                                                                 ####### 
                                                                                 ####### 
                                                                                ######## 
                                  ####                                         ######### 
                                  ####                                      ############ 
                                  ###################################################### 
                                  ##################################################### 
                                  ##################################################### 
                                  #################################################### 
                                  ################################################### 
                                  ################################################# 
                                  ############################################## 
                                  ########################################## 
                                  #### 
                                  #### 
                                       
                                                    ################## 
                                               ############################ 
                                             ################################ 
                                           #################################### 
                                         ######################################## 
                                       ############################################ 
                                      ############################################## 
                                     #############                      ############# 
                                    #########                                ######### 
                                    #######                                    ####### 
                                   ######                                        ###### 
                                   #####                                          ##### 
                                  #####                                            ##### 
                                  ####                                              #### 
                                  ####                                              #### 
                                  ####                                              #### 
                                  ####                                              #### 
                                  #####                                            ##### 
                                  #####                                            ##### 
                                   #####                                          ##### 
                                   ######                                        ###### 
                                    #######                                    ####### 
                                    #########                                ######### 
                                     #############                      ############# 
                                      ############################################## 
                                       ############################################ 
                                         ######################################## 
                                           #################################### 
                                             ################################ 
                                               ############################ 
                                                    ################## 
                                                                       
                                                                                    #### 
                                                                                    #### 
                                                                                 ####### 
                                                                              ########## 
                                                                          ############## 
                                                                      ################## 
                                                                  ###################### 
                                                               ######################### 
                                                           ############################# 
                                                       ################################# 
                                                   ##################################### 
                                                ################################    #### 
                                            ################################        #### 
                                        ################################ 
                                    ################################# 
                                  ############################### 
                                     ######################## 
                                        ################# 
                                            ############ 
                                                ############ 
                                                   ############# 
                                                #################### 
                                            ############################ 
                                        ############################### 
                                    ################################ 
                                  ############################## 
                                     ######################## 
                                        ################# 
                                            ############ 
                                                ############ 
                                                    ############ 
                                                       ############# 
                                                           ############# 
                                                               #############        #### 
                                                                   #############    #### 
                                                                       ################# 
                                                                           ############# 
                                                                              ########## 
                                                                                  ###### 
                                                                                    #### 
                                                                                    #### 
                                                                                    #### 
    """

def show():
    """Say show :-)
    """
    return _text

def show_gui():
    from bucho.compat import enable_gui
    if enable_gui:
        from bucho.gui import BuchoFrame
        frame = BuchoFrame(_text)
        frame.run()
    else:
        print_("Sorry, bucho is busy.")


def latest_status():
    """Print latest bucho's tweet.
    """
    url = urllib.urlopen('http://twitter.com/statuses/user_timeline/torufurukawa.json')
    tof = json.loads(url.read().decode('ascii'))
    return tof[0]['text']

def all_status():
    """Print all bucho's tweet.
    """
    url = urllib.urlopen('http://twitter.com/statuses/user_timeline/torufurukawa.json')
    tof = json.loads(url.read().decode('ascii'))
    return text_('\n').join(t['text'] for t in tof)

def torumemo():
    """Open torumemo with webbrowser.
    """
    import webbrowser
    webbrowser.open("http://oldriver.org/torumemo/")
    return text_('OK')
